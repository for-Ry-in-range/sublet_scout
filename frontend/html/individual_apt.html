{% extends "base.html" %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', path='individual_apt.css') }}">

<div class="container" style="padding-top: 6.0rem;">
    <h1>{{ apt.title }}</h1>

    <!-- Images -->
    <img src="data:image/webp;base64,{{ apt.image1 }}" alt="Listing Image">
    <img src="data:image/webp;base64,{{ apt.image2 }}" alt="Listing Image">
    <img src="data:image/webp;base64,{{ apt.image3 }}" alt="Listing Image">
    <img src="data:image/webp;base64,{{ apt.image4 }}" alt="Listing Image">

    <!-- Details -->
    <div class="details">
        <p><strong>Bedrooms Available:</strong> {{ apt.bedrooms_available }}</p>
        <p><strong>Total Rooms:</strong> {{ apt.total_rooms }}</p>
        <p><strong>Bedrooms In Use:</strong> {{ apt.bedrooms_in_use }}</p>
        <p><strong>Bathrooms:</strong> {{ apt.bathrooms }}</p>
        <p><strong>Price:</strong> ${{ apt.price }}/month</p>

        <p><strong>Available:</strong> 
            {{ apt.start_date }} â€“ {{ apt.end_date }}
        </p>
    </div>

    <!-- Map -->
    <div class="map">
        <h2>Location</h2>
        <div id="google-map"></div>
    </div>

    <!-- Amenities -->
    <h2>Amenities</h2>
    <ul>
        {% for amenity in apt.amenities %}
            <li>{{ amenity }}</li>
        {% endfor %}
    </ul>
</div>

<script>
    function initMap() {
        const location = { lat: {{ apt.latitude }}, lng: {{apt.longitude}} };
        console.log("looo" + location.lng);
        const map = new google.maps.Map(document.getElementById("google-map"), {
            zoom: 14,
            center: location,
        });
        new google.maps.Marker({
            position: location,
            map: map,
        });
    }
</script>

<script async defer
  src="https://maps.googleapis.com/maps/api/js?key={{ map_key }}&callback=initMap">
</script>

{% endblock %}
