{% extends "base.html" %}

{% block title %}Sublet Scout | Home{% endblock %}

{% block content %}
    <div class="container">
        <h1>Sublet Scout</h1>
        {% if user_name %}
            <p>Welcome, {{ user_name }}!</p>
        {% else %}
            <p>Welcome!</p>
        {% endif %}

        <p>Find verified student sublets in New York City.</p>

        <h2>Search for Sublets</h2>
        <form action="{{ url_for('show_homepage') }}" method="get" style="display:flex;gap:.5rem;flex-wrap:wrap;align-items:center;">
        <input type="text" id="q" name="q" placeholder="Location (neighborhood or city)" value="{{ query }}" style="flex:1 1 200px;padding:.4rem;">
        <input type="number" id="price" name="price" placeholder="Max $" style="width:110px;padding:.4rem;">
        <input type="text" id="dates" name="dates" placeholder="Dates (e.g. May - August)" style="flex:1 1 160px;padding:.4rem;">
        {% if user_id %}
            <input type="hidden" name="user_id" value="{{ user_id }}">
        {% endif %}
        <button type="submit" style="padding:.45rem 0.9rem;">Search</button>
        </form>

    </div>

    <div style="flex:1;">
    <div id="map" style="height:420px;width:100%;min-width:300px;border:1px solid #ddd;"></div>
    </div>

    <!-- Google Maps -->
    <script>
        function initMap() {
            var nyc = { lat: 40.7128, lng: -74.0060 };
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 12,
                center: nyc
            });
            new google.maps.Marker({position: nyc, map: map});
        }
    </script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key={{ map_key }}&callback=initMap">
    </script>
{% endblock %}